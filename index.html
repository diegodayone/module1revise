<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />

    <title>Hello, world!</title>
    <style>
      .specialLi {
        font-size: 24px;
      }

      .centeredInTheImage {
        position: absolute;
      }

      .team {
        border: 1px solid red;
        min-height: 200px;
      }
    </style>
  </head>
  <body>
    <div class="container">
   
        <div class="row" id="movies">
            
        </div>


      <div class="row">
        <div class="col-md-4">
          <ul id="players"></ul>
          <input type="text" id="newPlayer" />
          <input type="button" onclick="addPlayer()" value="add player" />
          <input
            type="button"
            onclick="assignPlayers()"
            value="assign players"
          />
        </div>
        <div class="col-md-4">
          <input type="number" id="newTeams" />
          <input type="button" onclick="addTeams()" value="add teams" />
        </div>
        <div class="col-md-4" id="teams"></div>
      </div>
    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <script>
    var movies = [
    {
        "Title": "The Lord of the Rings: The Fellowship of the Ring",
        "Year": "2001",
        "imdbID": "tt0120737",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BN2EyZjM3NzUtNWUzMi00MTgxLWI0NTctMzY4M2VlOTdjZWRiXkEyXkFqcGdeQXVyNDUzOTQ5MjY@._V1_SX300.jpg"
    },
    {
        "Title": "The Lord of the Rings: The Return of the King",
        "Year": "2003",
        "imdbID": "tt0167260",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BNzA5ZDNlZWMtM2NhNS00NDJjLTk4NDItYTRmY2EwMWZlMTY3XkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg"
    },
    {
        "Title": "The Lord of the Rings: The Two Towers",
        "Year": "2002",
        "imdbID": "tt0167261",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BNGE5MzIyNTAtNWFlMC00NDA2LWJiMjItMjc4Yjg1OWM5NzhhXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_SX300.jpg"
    },
    {
        "Title": "Lord of War",
        "Year": "2005",
        "imdbID": "tt0399295",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMTYzZWE3MDAtZjZkMi00MzhlLTlhZDUtNmI2Zjg3OWVlZWI0XkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_SX300.jpg"
    },
    {
        "Title": "Lords of Dogtown",
        "Year": "2005",
        "imdbID": "tt0355702",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BNDBhNGJlOTAtM2ExNi00NmEzLWFmZTQtYTZhYTRlNjJjODhmXkEyXkFqcGdeQXVyNDk3NzU2MTQ@._V1_SX300.jpg"
    },
    {
        "Title": "The Lord of the Rings",
        "Year": "1978",
        "imdbID": "tt0077869",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BOGMyNWJhZmYtNGQxYi00Y2ZjLWJmNjktNTgzZWJjOTg4YjM3L2ltYWdlXkEyXkFqcGdeQXVyNTAyODkwOQ@@._V1_SX300.jpg"
    },
    {
        "Title": "Lord of the Flies",
        "Year": "1990",
        "imdbID": "tt0100054",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BOTI2NTQyODk0M15BMl5BanBnXkFtZTcwNTQ3NDk0NA@@._V1_SX300.jpg"
    },
    {
        "Title": "The Lords of Salem",
        "Year": "2012",
        "imdbID": "tt1731697",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMjA2NTc5Njc4MV5BMl5BanBnXkFtZTcwNTYzMTcwOQ@@._V1_SX300.jpg"
    },
    {
        "Title": "Greystoke: The Legend of Tarzan, Lord of the Apes",
        "Year": "1984",
        "imdbID": "tt0087365",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMTM5MzcwOTg4MF5BMl5BanBnXkFtZTgwOTQwMzQxMDE@._V1_SX300.jpg"
    },
    {
        "Title": "Lord of the Flies",
        "Year": "1963",
        "imdbID": "tt0057261",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BOGEwYTlhMTgtODBlNC00ZjgzLTk1ZmEtNmNkMTEwYTZiM2Y0XkEyXkFqcGdeQXVyMzU4Nzk4MDI@._V1_SX300.jpg"
    },
    {
        "Title": "The Avengers",
        "Year": "2012",
        "imdbID": "tt0848228",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BNDYxNjQyMjAtNTdiOS00NGYwLWFmNTAtNThmYjU5ZGI2YTI1XkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg"
    },
    {
        "Title": "Avengers: Infinity War",
        "Year": "2018",
        "imdbID": "tt4154756",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMjMxNjY2MDU1OV5BMl5BanBnXkFtZTgwNzY1MTUwNTM@._V1_SX300.jpg"
    },
    {
        "Title": "Avengers: Age of Ultron",
        "Year": "2015",
        "imdbID": "tt2395427",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMTM4OGJmNWMtOTM4Ni00NTE3LTg3MDItZmQxYjc4N2JhNmUxXkEyXkFqcGdeQXVyNTgzMDMzMTg@._V1_SX300.jpg"
    },
    {
        "Title": "Avengers: Endgame",
        "Year": "2019",
        "imdbID": "tt4154796",
        "Type": "movie",
        "Poster": "https://m.media-amazon.com/images/M/MV5BMTc5MDE2ODcwNV5BMl5BanBnXkFtZTgwMzI2NzQ2NzM@._V1_SX300.jpg"
    }

]

      function addPlayer() {
        var list = document.querySelector("#players");
        var playerName = document.querySelector("#newPlayer").value;

        var li = document.createElement("li");
        li.innerText = playerName;
        list.appendChild(li);
      }

      function addTeams() {
        var numberOfTeams = parseInt(document.querySelector("#newTeams").value);

        var teams = document.querySelector("#teams");
        for (var i = 0; i < numberOfTeams; i++) {
          var div = document.createElement("div");
          div.classList.add("col-md-12");
          div.classList.add("team");
          div.innerText = "Team " + (i + 1);

          var ul = document.createElement("ul");
          div.appendChild(ul);
          teams.appendChild(div);
        }
      }

      function assignPlayers() {
        //Init
        //Randomly pick a player
        var ul = document.querySelector("#players"); 
        var players = ul.querySelectorAll("li"); //<= getting all the players from the list

        //Calculate how many players per team based on the #players and #teams
        var playersNumber = players.length; //how many players I have
        var numberOfTeams = parseInt(document.querySelector("#newTeams").value); //how many teams I have
        var playersPerTeam = Math.floor(playersNumber / numberOfTeams); //how many players per team

        while (players.length > 0) { //until I have players to be added
          var playersNumber = players.length; //update value
          var selectedPlayer = players[Math.round(Math.random() * (playersNumber - 1))]; //randomizing one of them

          //Add the player to the team
          var teams = document.querySelectorAll(".team"); //foreach team
          for (var i = 0; i < teams.length; i++) {
            var teamPlayers = teams[i].querySelectorAll("li");
            if (teamPlayers.length >= playersPerTeam) { //if it has enought players
              continue; //move to next team
            } else {
                //Create the player entry
              var ul = teams[i].querySelector("ul");
              var li = document.createElement("li");
              li.innerText = selectedPlayer.innerText;
              ul.appendChild(li);
              break;
            }
          }

          //Remove the player from the list
          selectedPlayer.remove();
          players = document.querySelector("#players").querySelectorAll("li"); //recalc players
        }
      }

      window.onload = function() {
        // var addListItemButton = document.querySelector("#addListItem");
        // addListItemButton.addEventListener("click", test);
        // var osButtons = document.querySelectorAll(".addOs"); //=> Array
        // for (var i = 0; i < osButtons.length; i++){
        //     osButtons[i].addEventListener("click", addImage);
        // }

        //For each movie in out catalogue
        //Create an image + title

        var moviesContainer = document.querySelector("#movies");
        console.log(moviesContainer);
        for (var i = 0; i < movies.length; i++){
            var div = document.createElement("div");
            div.classList.add("col-md-3");

            var image = document.createElement("img");
            image.setAttribute("src", movies[i].Poster);
            image.classList.add("img-fluid");
            div.appendChild(image);

            var title = document.createElement("h4");
            title.innerText = movies[i].Title;
            div.appendChild(title);

            moviesContainer.appendChild(div);
        }
      };

      function countImages() {
        var container = document.querySelector("#operatingSystems");
        var images = container.querySelectorAll("img");
        for (var i = 0; i < images.length; i++) {
          var text = document.createElement("span");
          //text.style.position = "absolute"

          var imageSource = images[i].getAttribute("src");
          switch (imageSource) {
            case "OSX.jpg":
              text.innerText = "OSX";
              break;
            case "Win10.jpg":
              text.innerText = "Windows 10";
              break;
            default:
              text.innerText = "Ubuntu";
          }

          // => from the Pic, getting the parent (div), adding the text to the DIV
          images[i].parentElement.appendChild(text);
        }
        console.log(images.length);
      }

      function addImage(myev) {
        var pressedButton = myev.currentTarget;

        var div = document.createElement("div");
        div.classList.add("col-md-4");

        var img = document.createElement("img");
        img.classList.add("img-fluid");

        console.log(pressedButton.value);
        var selectedButtonValue = pressedButton.value;

        switch (selectedButtonValue) {
          case "add OSX":
            img.setAttribute("src", "OSX.jpg");
            break;
          case "add Windows 10":
            img.setAttribute("src", "Win10.jpg");
            break;
          case "add Ubuntu":
            img.setAttribute("src", "ubuntu.png");
            break;
        }

        div.appendChild(img);

        var osContainer = document.querySelector("#operatingSystems");
        osContainer.appendChild(div);
      }

      function test(myClickEvent) {
        //create a new LI
        var li = document.createElement("li");
        li.innerHTML = "newly created list item";
        li.classList.add("specialLi");
        //get a reference to the list
        var ul = document.querySelector("#myList");
        //add the new LI to the list
        ul.appendChild(li);
      }
    </script>
  </body>
</html>
